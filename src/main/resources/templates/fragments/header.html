<!-- src/main/resources/templates/fragments/header.html -->
<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <title>Header</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <script th:src="@{/js/script.js}" defer></script>
</head>

<body>
<div th:fragment="header">
    <header class="topbar">
        <div class="topbar-inner">

            <!-- BÊN TRÁI: LOGO + SEARCH -->
            <div class="topbar-left">
                <a th:href="@{/home}" class="brand">
                    <span class="brand-icon">⚡</span>
                    <span class="brand-text">EV Trading</span>
                </a>

                <!-- Form Search -->
                <form class="top-search" th:action="@{/home}" method="get">
                    <input type="text"
                           name="q"
                           placeholder="Tìm xe điện, pin, địa điểm..."
                           th:value="${q}">
                    <button type="submit" class="top-search-btn">Tìm</button>
                </form>
            </div>

            <!-- BÊN PHẢI: LOGIN / USER -->
            <div class="topbar-right">

                <!-- Nếu CHƯA đăng nhập -->
                <div sec:authorize="isAnonymous()" class="auth-buttons">
                    <a th:href="@{/login}" class="btn-auth btn-auth-outline">Đăng nhập</a>
                    <a th:href="@{/register}" class="btn-auth btn-auth-main">Đăng ký</a>
                </div>

                <!-- Nếu ĐÃ đăng nhập -->
                <div sec:authorize="isAuthenticated()" class="user-menu">
                    <span class="user-name" sec:authentication="name"></span>

                    <form th:action="@{/logout}" method="post" class="logout-form">
                        <button type="submit" class="btn-logout">
                            Đăng xuất
                        </button>
                    </form>
                </div>

            </div>

        </div>
    </header>
</div>
</body>
</html>
