<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bảng tin</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/script.js}" defer></script>
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<section class="hero">
    <div class="hero-content">
        <h1>Bảng tin</h1>
        <p class="auth-subtitle">Tin đăng xe điện & pin mới nhất.</p>
        <a href="/posts/new" class="cta-btn">Đăng tin mới</a>
    </div>
</section>

<div class="auth-wrapper" style="padding-top:0">
    <div style="width:100%;max-width:1080px;margin:auto;">
        <form method="get" action="/posts" style="display:flex;gap:8px;margin-bottom:14px;">
            <input type="text" name="q" th:value="${q}" placeholder="Tìm theo tiêu đề / danh mục" style="flex:1;padding:9px;border:1px solid #dcdcdc;border-radius:8px;">
            <button class="btn-primary">Tìm</button>
        </form>

        <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;">
            <a th:each="p : ${posts.content}" th:href="@{'/posts/' + ${p.id}}" style="text-decoration:none;">
                <div class="card">
                    <img th:if="${p.imagePath}" th:src="${p.imagePath}" alt="img" style="width:100%;height:150px;object-fit:cover;border-radius:10px;">
                    <h3 th:text="${p.title}" style="margin-top:10px;"></h3>
                    <p th:text="${p.category}"></p>
                    <p th:if="${p.price != null}" th:text="${#numbers.formatInteger(p.price,3,'POINT')} + ' đ'"></p>
                </div>
            </a>
        </div>

        <div style="display:flex;gap:8px;justify-content:center;margin:16px 0;">
            <a th:if="${posts.hasPrevious()}" th:href="@{'/posts?page=' + ${posts.number - 1} + (${q}!=null ? '&q=' + ${q} : '')}" class="btn-outline">« Trước</a>
            <span>Trang <span th:text="${posts.number + 1}"></span>/<span th:text="${posts.totalPages==0?1:posts.totalPages}"></span></span>
            <a th:if="${posts.hasNext()}" th:href="@{'/posts?page=' + ${posts.number + 1} + (${q}!=null ? '&q=' + ${q} : '')}" class="btn-outline">Sau »</a>
        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>
</body>
</html>
